{"remainingRequest":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/src/views/teacher/QuestionCreate.vue?vue&type=style&index=0&id=0f76e989&scoped=true&lang=css&","dependencies":[{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/src/views/teacher/QuestionCreate.vue","mtime":1625884887859},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hbGVydCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDUwJTsKICB0b3A6IDIwMHB4OwogIHotaW5kZXg6IDk5OTsKfQo="},{"version":3,"sources":["QuestionCreate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkOA;AACA;AACA;AACA;AACA;AACA","file":"QuestionCreate.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\n  <div>\n    <v-alert\n        class=\"alert\"\n        type=\"success\"\n        text\n        v-show=\"showSuccessDialog\"\n        transition=\"scroll-y-transition\"\n    >\n      习题创建成功！\n    </v-alert>\n    <!-- alert -->\n    <v-alert\n        class=\"alert\"\n        type=\"warning\"\n        text\n        v-show=\"showFailDialog\"\n        transition=\"scroll-y-transition\"\n    >\n      {{ msg }}\n    </v-alert>\n    <v-container class=\"pl-16 pr-16\">\n      <v-toolbar color=\"deep-purple lighten-2\" dark class=\"mt-10\">\n        <v-toolbar-title>题目信息</v-toolbar-title>\n      </v-toolbar>\n      <form class=\"pa-12 grey lighten-5 mt-8\">\n        <v-select\n            :items=\"courseNameLists\"\n            v-model=\"courseName\"\n            label=\"所属课程\"\n            @change=\"setCourseId\"\n        ></v-select>\n        <v-select\n          :items=\"types\"\n          v-model=\"quesInfo.type\"\n          label=\"题目类型\">\n        </v-select>\n        <v-textarea\n            v-model=\"tempContent\"\n            label=\"题干信息\"\n            placeholder=\"选择题输入选项前请换行\"\n        ></v-textarea>\n\n        <v-text-field\n            v-model=\"quesInfo.answer\"\n            label=\"答案\"\n            placeholder=\"请区分大小写\"\n        ></v-text-field>\n        <v-textarea v-model=\"quesInfo.analysis\" label=\"题目解析\"></v-textarea>\n        <v-btn class=\"ml-0 mt-8 \" color=\"indigo\" outlined @click=\"submit\">\n          确认\n        </v-btn>\n      </form>\n\n\n    </v-container>\n\n    <!-- 提示对话框 -->\n    <v-dialog v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-card-title> </v-card-title>\n\n        <v-card-text>\n          专题创建成功。\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"dialog = false\">\n            确认\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n\n</template>\n\n<script>\nimport { getTeacherCourses} from \"@/api/course\";\nimport {createQuestion} from \"@/api/question\";\n\nexport default {\n  name: \"QuestionCreate\",\n  data() {\n    return {\n      quesInfo: {\n        type: null,\n        content:null,\n        analysis: null,\n        courseId: null,\n        answer:null,\n        teacherId:null,\n      },\n      tempContent:null,\n      courseName:null,\n      types: [\"单选\", \"多选\",\"填空\"],\n      option:[],\n      courseNameLists:[],\n      courseList:[],\n      dialog: false,\n      showSuccessDialog: false,\n      showFailDialog: false,\n      msg: \"\"\n    };\n  },\n  mounted() {\n    const uid = window.localStorage.getItem(\"userId\");\n    if (uid) {\n      getTeacherCourses(uid).then(res => {\n        //console.log(res);\n        for(var i=0;i<res.length;i++){\n          console.log(res[i])\n          this.courseNameLists.push(res[i].name);\n          this.courseList.push({\"name\":res[i].name,\"id\":res[i].id})\n        }\n      });\n\n    }\n\n  },\n  methods:{\n    contentProcess(){\n      if(this.quesInfo.type!==\"填空\"){\n        this.quesInfo.content=this.tempContent.replaceAll('\\n',\"#~#\");\n        console.log(this.quesInfo.content);\n      }else{\n        this.quesInfo.content=this.tempContent;\n      }\n    },\n    setCourseId(){\n      for(let i=0;i<this.courseList.length;i++){\n        if(this.courseName===this.courseList[i].name){\n          this.quesInfo.courseId=this.courseList[i].id;\n          console.log(this.quesInfo.courseId)\n        }\n      }\n    },\n    submit() {\n      this.contentProcess();\n      console.log(\"I'm submiting\")\n      if(this.quesInfo.content===null || this.quesInfo.content===\"\"||\n      this.quesInfo.courseId===null||\n      this.quesInfo.answer===null||this.quesInfo.answer===\"\"||\n      this.quesInfo.type===null||this.quesInfo.answer===\"\") {\n        this.showFailDialog = true;\n        this.msg = \"必填信息不能为空\";\n        setTimeout(() => {\n          this.showFailDialog = false;\n        }, 1000);\n      }else if(!this.checkAnswerFormat()){\n        this.showFailDialog = true;\n        setTimeout(() => {\n          this.showFailDialog = false;\n        }, 1000);\n      }else{\n\n        const uid= window.localStorage.getItem(\"userId\");\n        this.quesInfo.teacherId=uid;\n        const payload={\n          ...this.quesInfo,\n        }\n        console.log(payload)\n        if(uid){\n          createQuestion(payload).then(res=>{\n            console.log(res);\n            if (res.code === 1) {\n              this.showSuccessDialog = true;\n              setTimeout(() => {\n                this.showSuccessDialog = false;\n              }, 1000);\n            } else {\n              this.showFailDialog = true;\n              this.msg = res.msg;\n              setTimeout(() => {\n                this.showFailDialog = false;\n              }, 1000);\n            }\n          });\n        }\n      }\n    },\n    checkAnswerFormat(){//153\n      if(this.quesInfo.type==='填空'){\n        return true;\n      }\n      if(this.quesInfo.type===\"单选\"&&this.quesInfo.answer.length>1){\n        this.msg=\"单选题答案选项数不能多于1\";\n        return false;\n      }\n      var answerBodyList=this.quesInfo.content.split(\"#~#\").slice(1);\n      var answerOpList=[];\n\n      for(let i=0;i<answerBodyList.length;i++){\n        let op = answerBodyList[i].split('.',1)[0];\n        console.log(op.length)\n        if(op.length>1){\n          this.msg=\"选项格式非法\";\n          return false;\n        }else{answerOpList.push(op)}\n      }\n      console.log(answerOpList)\n      var answerList=this.quesInfo.answer.split('');\n      if(answerOpList.length<=1){\n        this.msg=\"选择题至少包含两个选项\";\n        return false;\n      }\n      for(let i=0;i<answerList.length;i++){\n        if(answerOpList.indexOf(answerList[i])===-1){\n          console.log(answerList[i])\n          this.msg=\"答案不包括在设置的选项内，请检查\"\n          return false;\n        }\n      }\n      return true;\n    },\n\n  },\n\n}\n\n</script>\n\n<style scoped>\n.alert {\n  position: fixed;\n  left: 50%;\n  top: 200px;\n  z-index: 999;\n}\n</style>"]}]}