{"remainingRequest":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/src/views/teacher/TestCreate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/src/views/teacher/TestCreate.vue","mtime":1625889252285},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/scarlett/IdeaProjects/35cf82cde2094d8a989779d9507bd7a7/front_end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y3JlYXRlVGVzdH0gZnJvbSAiQC9hcGkvdGVzdCI7CmltcG9ydCB7Z2V0VGVhY2hlckNvdXJzZXN9IGZyb20gIkAvYXBpL2NvdXJzZSI7CmltcG9ydCBRdWVzdGlvbkl0ZW0gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9RdWVzdGlvbkl0ZW0udnVlIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQge2FkZFF1ZXN0aW9uVG9UZXN0fSBmcm9tICJAL2FwaS9xdWVzdGlvbl90ZXN0IjsKaW1wb3J0IHtnZXRRdWVzdGlvbkJ5Q291cnNlSWR9IGZyb20gIkAvYXBpL3F1ZXN0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoIHsKICBuYW1lOiAiVGVzdENyZWF0ZSIsCiAgY29tcG9uZW50czp7CiAgUXVlc3Rpb25JdGVtLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRlc3RJbmZvOiB7CiAgICAgICAgdGVzdE5hbWU6bnVsbCwKICAgICAgICB0ZWFjaGVySWQ6bnVsbCwKICAgICAgICBjb3Vyc2VJZDogbnVsbCwKICAgICAgICBzdGFydFRpbWU6bnVsbCwKICAgICAgICBlbmRUaW1lOm51bGwsCiAgICAgICAgbGVuZ3RoOm51bGwsCiAgICAgICAgY291cnNlTmFtZTpudWxsLAogICAgICB9LAogICAgICBzZWxlY3RlZFF1ZXNJZDpbXSwKICAgICAgdGVzdEZvcm1hdExlbmd0aDpbNSwxMCwyMCwyNV0sCiAgICAgIHRlc3RMZW5ndGg6MCwKICAgICAgdGltZTpudWxsLAogICAgICB0eXBlczogWyLljZXpgIkiLCAi5aSa6YCJIl0sCiAgICAgIGNvdXJzZUxpc3Q6W10sCiAgICAgIGNvdXJzZU5hbWVMaXN0OltdLAogICAgICBmb3JtYXRTdGFydFRpbWU6bnVsbCwKICAgICAgZm9ybWF0RW5kVGltZTpudWxsLAogICAgICB0ZXN0czpbXSwKICAgICAgdGVzdExpc3RzOlsxLDIsM10sCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIHNob3dTdWNjZXNzRGlhbG9nOiBmYWxzZSwKICAgICAgc2hvd0ZhaWxEaWFsb2c6IGZhbHNlLAogICAgICBtc2c6ICIiLAogICAgICBxdWVzdGlvbkxpc3Q6W10KICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgdWlkID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKTsKICAgIGlmICh1aWQpIHsKICAgICAgZ2V0VGVhY2hlckNvdXJzZXModWlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGZvcih2YXIgaT0wO2k8cmVzLmxlbmd0aDtpKyspewogICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNbaV0pCiAgICAgICAgICB0aGlzLmNvdXJzZU5hbWVMaXN0LnB1c2gocmVzW2ldLm5hbWUpOwogICAgICAgICAgdGhpcy5jb3Vyc2VMaXN0LnB1c2goeyJuYW1lIjpyZXNbaV0ubmFtZSwiaWQiOnJlc1tpXS5pZH0pCiAgICAgICAgfQogICAgICB9KTsKCiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tEYXRlRm9ybWF0KCl7CiAgICAgIHZhciByZURhdGVUaW1lID0gL14oPzoxOXwyMClbMC05XVswLTldLSg/Oig/OjBbMS05XSl8KD86MVswLTJdKSktKD86KD86WzAtMl1bMS05XSl8KD86WzEtM11bMC0xXSkpICg/Oig/OlswLTJdWzAtM10pfCg/OlswLTFdWzAtOV0pKTpbMC01XVswLTldOlswLTVdWzAtOV0kLzsKICAgICAgdmFyIGlzU3RhcnRUaW1lID0gcmVEYXRlVGltZS50ZXN0KHRoaXMuZm9ybWF0U3RhcnRUaW1lKTsKICAgICAgdmFyIGlzRW5kVGltZT1yZURhdGVUaW1lLnRlc3QodGhpcy5mb3JtYXRFbmRUaW1lKTsKICAgICAgaWYoaXNTdGFydFRpbWU9PT1mYWxzZSkgewogICAgICAgIHRoaXMubXNnPSLotbflp4vml6XmnJ/moLzlvI/mnInor68iCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgaWYoaXNFbmRUaW1lPT09ZmFsc2UpewogICAgICAgIHRoaXMubXNnPSLmiKrmraLml6XmnJ/moLzlvI/mnInor68iCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB9LAogICAgc2V0Q291cnNlSWQoKSB7CiAgICAgIHRoaXMucXVlc3Rpb25MaXN0PVtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY291cnNlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRlc3RJbmZvLmNvdXJzZU5hbWUgPT09IHRoaXMuY291cnNlTGlzdFtpXS5uYW1lKSB7CiAgICAgICAgICB0aGlzLnRlc3RJbmZvLmNvdXJzZUlkID0gdGhpcy5jb3Vyc2VMaXN0W2ldLmlkOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy50ZXN0SW5mby5jb3Vyc2VJZCkKICAgICAgICB9CiAgICAgIH0KICAgICAgZ2V0UXVlc3Rpb25CeUNvdXJzZUlkKHRoaXMudGVzdEluZm8uY291cnNlSWQpLnRoZW4ocmVzPT57CiAgICAgICAgICBmb3IobGV0IGk9MDtpPHJlcy5sZW5ndGg7aSsrKXsKICAgICAgICB0aGlzLnF1ZXN0aW9uTGlzdC5wdXNoKHJlc1tpXSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBjb25zb2xlLmxvZygiSSdtIHN1Ym1pdGluZyIpCiAgICAgIGlmKCB0aGlzLmNoZWNrRGF0ZUZvcm1hdCgpKSB7CiAgICAgICAgdGhpcy5zaG93RmFpbERpYWxvZz10cnVlOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5zaG93RmFpbERpYWxvZyA9IGZhbHNlOwogICAgICAgIH0sIDEwMDApOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnRlc3RJbmZvLnN0YXJ0VGltZSA9IHRoaXMuZGF0ZUNvbnZlcnRUb1N0YW1wKHRoaXMuZm9ybWF0U3RhcnRUaW1lKTsKICAgICAgICB0aGlzLnRlc3RJbmZvLmVuZFRpbWUgPSB0aGlzLmRhdGVDb252ZXJ0VG9TdGFtcCh0aGlzLmZvcm1hdEVuZFRpbWUpOwogICAgICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUXVlc0lkLmxlbmd0aCA+IHRoaXMudGVzdExlbmd0aCkgewogICAgICAgICAgdGhpcy5zaG93RmFpbERpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm1zZyA9ICLmiYDpgInpopjnm67mlbDph4/otoXov4forr7nva7nmoTpopjnm67mlbDph48iOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFF1ZXNJZC5sZW5ndGggPCB0aGlzLnRlc3RMZW5ndGgpIHsKICAgICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5tc2cgPSAi5omA6YCJ6aKY55uu5pWw6YeP5LiN6LazIjsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGVzdEluZm8uZW5kVGltZSA9PT0gIiIgfHwgdGhpcy50ZXN0SW5mby5lbmRUaW1lID09PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMudGVzdEluZm8uc3RhcnRUaW1lID09PSAiIiB8fCB0aGlzLnRlc3RJbmZvLnN0YXJ0VGltZSA9PT0gbnVsbCB8fAogICAgICAgICAgICB0aGlzLnRlc3RJbmZvLmNvdXJzZUlkID09PSAiIiB8fCB0aGlzLnRlc3RJbmZvLmNvdXJzZUlkID09PSBudWxsIHx8CiAgICAgICAgICAgIHRoaXMudGVzdEluZm8ubmFtZSA9PT0gIiIgfHwgdGhpcy50ZXN0SW5mby5uYW1lID09PSBudWxsKSB7CiAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubXNnID0gIuW/heWhq+S/oeaBr+S4jeiDveS4uuepuiI7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zaG93RmFpbERpYWxvZyA9IGZhbHNlOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRlc3RJbmZvLmVuZFRpbWU8PWN1cnJlbnRUaW1lKXsKICAgICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5tc2c9IuS4jeiDveWIm+W7uuW3sue7j+aIquatoueahOiAg+ivlSIKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB9LCAxMDAwKTsKCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRlc3RJbmZvLnN0YXJ0VGltZSA+PSB0aGlzLnRlc3RJbmZvLmVuZFRpbWUpIHsKICAgICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5tc2cgPSAi6LW35q2i5pe26Ze06Z2e5rOVIjsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIGNvbnN0IHVpZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIik7CiAgICAgICAgICB0aGlzLnRlc3RJbmZvLnRlYWNoZXJJZCA9IHVpZDsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGVzdExlbmd0aCk7CiAgICAgICAgICB0aGlzLnRlc3RJbmZvLmxlbmd0aCA9IDA7CiAgICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgICAuLi50aGlzLnRlc3RJbmZvCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHVpZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgY3JlYXRlVGVzdChwYXlsb2FkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGlkKQogICAgICAgICAgICAgICAgZm9yKGxldCBpbmRleD0wO2luZGV4PHRoaXMuc2VsZWN0ZWRRdWVzSWQubGVuZ3RoO2luZGV4KyspewogICAgICAgICAgICAgICAgICB2YXIgcmVjb3JkPXsKICAgICAgICAgICAgICAgICAgICAicXVlc3Rpb25JZCI6dGhpcy5zZWxlY3RlZFF1ZXNJZFtpbmRleF0sCiAgICAgICAgICAgICAgICAgICAgInRlc3RJZCI6dGlkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYWRkUXVlc3Rpb25Ub1Rlc3QocmVjb3JkKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3NEaWFsb2cgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3NEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMubXNnID0gcmVzLm1zZzsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICB9CgogICAgICB9CiAgICB9LAogICAgZGF0ZUNvbnZlcnRUb1N0YW1wKGRhdGUpIHsKICAgICAgZGF0ZSA9IGRhdGUucmVwbGFjZShuZXcgUmVnRXhwKCItIiwgImdtIiksICIvIik7CiAgICAgIHZhciBzdGFtcCA9IChuZXcgRGF0ZShkYXRlKSkuZ2V0VGltZSgpOyAvL+W+l+WIsOavq+enkuaVsAogICAgICBjb25zb2xlLmxvZyhzdGFtcCk7CiAgICAgIHJldHVybiBzdGFtcDsKICAgIH0sCiAgICBjaGVja0xlbmd0aCgpIHsKICAgICAgLy8gY29uc29sZS5sb2coImNoZWNraW5nIikKICAgICAgaWYgKHRoaXMudGVzdExlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSB0cnVlOwogICAgICAgIHRoaXMubXNnID0gIuacquiuvue9rumimOebruaVsOmHjyI7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnNob3dGYWlsRGlhbG9nID0gZmFsc2U7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFF1ZXNJZC5sZW5ndGggPiB0aGlzLnRlc3RMZW5ndGgpIHsKCiAgICAgICAgdGhpcy5zaG93RmFpbERpYWxvZyA9IHRydWU7CiAgICAgICAgdGhpcy5tc2cgPSAi5omA6YCJ6aKY55uu5pWw6YeP6LaF6L+H6K6+572u55qE6aKY55uu5pWw6YePIjsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuc2hvd0ZhaWxEaWFsb2cgPSBmYWxzZTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfQogICAgfSwKICB9Cgp9KQoK"},{"version":3,"sources":["TestCreate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TestCreate.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\n  <div>\n    <v-alert\n        class=\"alert\"\n        type=\"success\"\n        text\n        v-show=\"showSuccessDialog\"\n        transition=\"scroll-y-transition\"\n    >\n      测试创建成功！\n    </v-alert>\n    <!-- alert -->\n    <v-alert\n        class=\"alert\"\n        type=\"warning\"\n        text\n        v-show=\"showFailDialog\"\n        transition=\"scroll-y-transition\"\n    >\n      {{ msg }}\n    </v-alert>\n    <v-container class=\"pl-16 pr-16\">\n      <v-toolbar color=\"deep-purple lighten-2\" dark class=\"mt-10\">\n        <v-toolbar-title>测试信息</v-toolbar-title>\n      </v-toolbar>\n      <form class=\"pa-12 grey lighten-5 mt-8\">\n\n        <v-select\n            :items=\"courseNameList\"\n            v-model=\"testInfo.courseName\"\n            label=\"所属课程\"\n            @change=\"setCourseId\"\n        ></v-select>\n        <v-text-field\n            v-model=\"testInfo.testName\"\n            label=\"标题\"\n        ></v-text-field>\n        <v-text-field\n            v-model=\"formatStartTime\"\n            label=\"起始时间\"\n            placeholder=\"格式如 2020-06-18 20：00：00\"\n        ></v-text-field>\n        <v-text-field\n            v-model=\"formatEndTime\"\n            label=\"截止时间\"\n            placeholder=\"格式如 2020-06-18 20：00：00\"\n        ></v-text-field>\n        <v-select\n            :items=\"testFormatLength\"\n            v-model=\"testLength\"\n            label=\"题目数量\"\n        ></v-select>\n        <v-text-field\n            disabled label=\"题目列表\"\n            :value=\"selectedQuesId\"\n            v-model=\"selectedQuesId\"\n\n        ></v-text-field>\n\n        <v-btn class=\"ml-0 mt-8 \" @click=\"submit\" color=\"indigo\" dark>\n          确认\n        </v-btn>\n      </form>\n      <v-toolbar color=\"deep-purple lighten-2\" dark class=\"mt-10 mb-10\">\n        <v-toolbar-title>选择题目 ( {{ selectedQuesId.length }} / {{testLength}} ) 已选{{selectedQuesId.length}}</v-toolbar-title>\n      </v-toolbar>\n      <v-row v-for=\"ques in questionList\" :key=\"ques.id\">\n        <v-checkbox :label=\"ques.id+''\" :value=\"ques.id\" class=\"ml-10 mt-4\" color=\"indigo\" v-model=\"selectedQuesId\" @change=\"checkLength\"></v-checkbox>\n        <question-item\n            :key=\"ques.id\"\n            :teacher-id=\"ques.teacherId\"\n            :course-id=\"ques.courseId\"\n            :content=\"ques.content\"\n            :analysis=\"ques.analysis\"\n            :answer=\"ques.answer\"\n            :ques-id=\"ques.id\"\n            :type=\"ques.type\"\n            :show-analysis=true\n\n        ></question-item>\n      </v-row>\n    </v-container>\n\n    <!-- 提示对话框 -->\n    <v-dialog v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-card-title> </v-card-title>\n\n        <v-card-text>\n          专题创建成功。\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"dialog = false\">\n            确认\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n\n</template>\n\n\n<script >\nimport {createTest} from \"@/api/test\";\nimport {getTeacherCourses} from \"@/api/course\";\nimport QuestionItem from \"../../components/QuestionItem.vue\";\nimport Vue from \"vue\";\nimport {addQuestionToTest} from \"@/api/question_test\";\nimport {getQuestionByCourseId} from \"@/api/question\";\n\nexport default Vue.extend( {\n  name: \"TestCreate\",\n  components:{\n  QuestionItem,\n  },\n  data() {\n    return {\n      testInfo: {\n        testName:null,\n        teacherId:null,\n        courseId: null,\n        startTime:null,\n        endTime:null,\n        length:null,\n        courseName:null,\n      },\n      selectedQuesId:[],\n      testFormatLength:[5,10,20,25],\n      testLength:0,\n      time:null,\n      types: [\"单选\", \"多选\"],\n      courseList:[],\n      courseNameList:[],\n      formatStartTime:null,\n      formatEndTime:null,\n      tests:[],\n      testLists:[1,2,3],\n      dialog: false,\n      showSuccessDialog: false,\n      showFailDialog: false,\n      msg: \"\",\n      questionList:[]\n    };\n  },\n  mounted() {\n    const uid = window.localStorage.getItem(\"userId\");\n    if (uid) {\n      getTeacherCourses(uid).then(res => {\n        //console.log(res);\n        for(var i=0;i<res.length;i++){\n          //console.log(res[i])\n          this.courseNameList.push(res[i].name);\n          this.courseList.push({\"name\":res[i].name,\"id\":res[i].id})\n        }\n      });\n\n    }\n\n  },\n  methods: {\n    checkDateFormat(){\n      var reDateTime = /^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$/;\n      var isStartTime = reDateTime.test(this.formatStartTime);\n      var isEndTime=reDateTime.test(this.formatEndTime);\n      if(isStartTime===false) {\n        this.msg=\"起始日期格式有误\"\n        return true;\n      }\n      if(isEndTime===false){\n        this.msg=\"截止日期格式有误\"\n        return true;\n      }\n\n      return false;\n\n    },\n    setCourseId() {\n      this.questionList=[];\n      for (let i = 0; i < this.courseList.length; i++) {\n        if (this.testInfo.courseName === this.courseList[i].name) {\n          this.testInfo.courseId = this.courseList[i].id;\n          console.log(this.testInfo.courseId)\n        }\n      }\n      getQuestionByCourseId(this.testInfo.courseId).then(res=>{\n          for(let i=0;i<res.length;i++){\n        this.questionList.push(res[i]);\n        }\n      });\n\n    },\n    submit() {\n      console.log(\"I'm submiting\")\n      if( this.checkDateFormat()) {\n        this.showFailDialog=true;\n        setTimeout(() => {\n          this.showFailDialog = false;\n        }, 1000);\n      }else{\n        this.testInfo.startTime = this.dateConvertToStamp(this.formatStartTime);\n        this.testInfo.endTime = this.dateConvertToStamp(this.formatEndTime);\n        var currentTime = new Date().getTime();\n        if (this.selectedQuesId.length > this.testLength) {\n          this.showFailDialog = true;\n          this.msg = \"所选题目数量超过设置的题目数量\";\n          setTimeout(() => {\n            this.showFailDialog = false;\n          }, 1000);\n        } else if (this.selectedQuesId.length < this.testLength) {\n          this.showFailDialog = true;\n          this.msg = \"所选题目数量不足\";\n          setTimeout(() => {\n            this.showFailDialog = false;\n          }, 1000);\n        } else if (this.testInfo.endTime === \"\" || this.testInfo.endTime === null ||\n            this.testInfo.startTime === \"\" || this.testInfo.startTime === null ||\n            this.testInfo.courseId === \"\" || this.testInfo.courseId === null ||\n            this.testInfo.name === \"\" || this.testInfo.name === null) {\n          this.showFailDialog = true;\n          this.msg = \"必填信息不能为空\";\n          setTimeout(() => {\n            this.showFailDialog = false;\n          }, 1000);\n        } else if (this.testInfo.endTime<=currentTime){\n          this.showFailDialog = true;\n          this.msg=\"不能创建已经截止的考试\"\n          setTimeout(() => {\n            this.showFailDialog = false;\n          }, 1000);\n\n        } else if (this.testInfo.startTime >= this.testInfo.endTime) {\n          this.showFailDialog = true;\n          this.msg = \"起止时间非法\";\n          setTimeout(() => {\n            this.showFailDialog = false;\n          }, 1000);\n        } else {\n\n          const uid = window.localStorage.getItem(\"userId\");\n          this.testInfo.teacherId = uid;\n          console.log(this.testLength);\n          this.testInfo.length = 0;\n          const payload = {\n            ...this.testInfo\n          };\n          if (uid) {\n            console.log(payload);\n            createTest(payload).then(res => {\n              console.log(res);\n              if (res.code === 1) {\n                const tid = res.data.id;\n                console.log(tid)\n                for(let index=0;index<this.selectedQuesId.length;index++){\n                  var record={\n                    \"questionId\":this.selectedQuesId[index],\n                    \"testId\":tid\n                  }\n                  addQuestionToTest(record).then(res=>{\n                    console.log(res)\n                  })\n                }\n                this.showSuccessDialog = true;\n                setTimeout(() => {\n                  this.showSuccessDialog = false;\n                }, 1000);\n              } else {\n                this.showFailDialog = true;\n                this.msg = res.msg;\n                setTimeout(() => {\n                  this.showFailDialog = false;\n                }, 1000);\n              }\n            });\n          }\n\n        }\n\n      }\n    },\n    dateConvertToStamp(date) {\n      date = date.replace(new RegExp(\"-\", \"gm\"), \"/\");\n      var stamp = (new Date(date)).getTime(); //得到毫秒数\n      console.log(stamp);\n      return stamp;\n    },\n    checkLength() {\n      // console.log(\"checking\")\n      if (this.testLength === 0) {\n        this.showFailDialog = true;\n        this.msg = \"未设置题目数量\";\n        setTimeout(() => {\n          this.showFailDialog = false;\n        }, 1000);\n      } else if (this.selectedQuesId.length > this.testLength) {\n\n        this.showFailDialog = true;\n        this.msg = \"所选题目数量超过设置的题目数量\";\n        setTimeout(() => {\n          this.showFailDialog = false;\n        }, 1000);\n      }\n    },\n  }\n\n})\n\n</script>\n\n<style scoped>\n.alert {\n  position: fixed;\n  left: 50%;\n  top: 200px;\n  z-index: 999;\n}\n</style>"]}]}